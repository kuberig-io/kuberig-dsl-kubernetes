- pipeline: "upstream-and-availability-sync"
  trigger_mode: "SCHEDULED"
  ref_name: "master"
  ref_type: "BRANCH"
  start_date: "2020-09-28T08:12:00.000Z"
  delay: 180
  fail_on_prepare_env_warning: true
  trigger_condition: "ALWAYS"
  actions:
  - action: "Execute: gradle generateDslProjects publishMissing showMissingFromJCenter"
    type: "BUILD"
    working_directory: "/buddy/kuberig-dsl-kubernetes"
    docker_image_name: "library/gradle"
    docker_image_tag: "6.6.1-jdk11"
    execute_commands:
    - "gradle generateDslProjects publishMissing showMissingFromJCenter"
    volume_mappings:
    - "/:/buddy/kuberig-dsl-kubernetes"
    trigger_condition: "ALWAYS"
    shell: "BASH"
  - action: "Push to "
    type: "PUSH"
    git_auth_mode: "CURRENT"
    comment: "Auto upstream & availability sync."
    trigger_condition: "ON_CHANGE_AT_PATH"
    trigger_condition_paths:
    - "AVAILABILITY.MD"
    without_force: true
  - action: "Send notification to kuberig-dsl-robot channel"
    type: "SLACK"
    content: "[#$BUDDY_EXECUTION_ID] $BUDDY_PIPELINE_NAME execution by <$BUDDY_INVOKER_URL|$BUDDY_INVOKER_NAME>"
    blocks: "[{\"type\":\"section\",\"fields\":[{\"type\":\"mrkdwn\",\"text\":\"*Successful execution:* <$BUDDY_EXECUTION_URL|Execution #$BUDDY_EXECUTION_ID $BUDDY_EXECUTION_COMMENT>\"},{\"type\":\"mrkdwn\",\"text\":\"*Pipeline:* <$BUDDY_PIPELINE_URL|$BUDDY_PIPELINE_NAME>\"},{\"type\":\"mrkdwn\",\"text\":\"*Branch:* $BUDDY_EXECUTION_BRANCH\"},{\"type\":\"mrkdwn\",\"text\":\"*Project:* <$BUDDY_PROJECT_URL|$BUDDY_PROJECT_NAME>\"}]}]"
    channel: "CLG09B8A3"
    channel_name: "kuberig-dsl-robot"
    file_attachments:
    - "fs:///AVAILABILITY.MD"
    trigger_condition: "ON_CHANGE_AT_PATH"
    trigger_condition_paths:
      - "AVAILABILITY.MD"
    integration_hash: "5f71f537b6d70a2804018b16"
